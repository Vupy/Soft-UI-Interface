@use "sass:map";
@import '../effects/effects';

$styles: -left, -right, -top, -bottom, -vertical, -horizontal, '';

@function str-replace($string, $search, $replace: '') {
    $index: str-index($string, $search);
    
    @if $index {
        @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
    }
    
    @return $string;
}

@mixin create_spacer_format($class, $size, $type, $style, $effect) {
    @if $style == '-vertical' {
        .#{$effect}#{$class}#{map.get($effects, $effect)} {
            #{str-replace($type, '-vertical', '')}-top: $size;
            #{str-replace($type, '-vertical', '')}-bottom: $size;
        }
    } @else if $style == '-horizontal' {
        .#{$effect}#{$class}#{map.get($effects, $effect)} {
            #{str-replace($type, '-horizontal', '')}-left: $size;
            #{str-replace($type, '-horizontal', '')}-right: $size;
        }
    } @else {
        .#{$effect}#{$class}#{map.get($effects, $effect)} {
            #{$type}: $size;
        }
    }
}

@mixin create_spacer($class, $type, $effect) {
    @each $s in $styles {
        @include create_spacer_format(#{$class}#{str-replace($s, '-', '__')}__auto, auto, "#{$type}#{$s}", $s, $effect);

        @for $i from 0 to 4 {
            @include create_spacer_format(#{$class}#{str-replace($s, '-', '__')}__#{str-replace("#{$i * .25}", "0.", "\\.")}, $i * .25rem, "#{$type}#{$s}", $s, $effect);
        }

        @for $i from 1 to 17 {
            @include create_spacer_format(#{$class}#{str-replace($s, '-', '__')}__#{$i}, $i * 1rem, "#{$type}#{$s}", $s, $effect);
        }

        @for $i from 1 to 17 {
            @include create_spacer_format(#{$class}#{str-replace($s, '-', '__')}__#{$i + 16}, $i * 2rem + 16rem, "#{$type}#{$s}", $s, $effect);
        }

        @for $i from 1 to 17 {
            @include create_spacer_format(#{$class}#{str-replace($s, '-', '__')}__#{$i + 32}, $i * 4rem + 48rem, "#{$type}#{$s}", $s, $effect);
        }
    }
}

@each $i, $_ in $effects {
    @include create_spacer(pad, padding, $i);
    @include create_spacer(mar, margin, $i);
}
